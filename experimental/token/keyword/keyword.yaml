# Copyright 2020-2024 Buf Technologies, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http:#www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

- name: Keyword
  type: byte
  docs: |
    Keywords are special "grammar particles" recognized by the compiler.
    
    These include both reserved words, including all identifiers with special
    treatment [in Protobuf], as well as all valid punctuation.

    [in Protobuf]: https://protobuf.com/docs/language-spec#identifiers-and-keywords
  doc_is_string: true
  methods:
    - kind: string
    - kind: go-string

    - kind: from-string
      name: Lookup
      skip: [Parens, Brackets, Braces, Angles, BlockComment]
      docs: |
        Lookup looks up a keyword by name.

        If name does not name a keyword, returns [Unknown].

    - kind: all
      name: All
      skip: [Unknown]
      docs: |
        All returns an iterator over all distinct [Keyword] values.

  values:
  - {name: Unknown, string: unknown, docs: "Zero value, not a real keyword."}

  ## Reserved words ##

  # Protobuf-specific keywords.
  - {name: Syntax, string: syntax}
  - {name: Edition, string: edition}
  - {name: Import, string: import}
  - {name: Weak, string: weak}
  - {name: Public, string: public}
  - {name: Package, string: package}

  - {name: Message, string: message}
  - {name: Enum, string: enum}
  - {name: Service, string: service}
  - {name: Extend, string: extend}
  - {name: Option, string: option}
  - {name: Group, string: group}
  - {name: Oneof, string: oneof}
  - {name: Extensions, string: extensions}
  - {name: Reserved, string: reserved}
  - {name: RPC, string: rpc}

  - {name: Returns, string: returns}
  - {name: To, string: to}

  - {name: Optional, string: optional}
  - {name: Repeated, string: repeated}
  - {name: Required, string: required}
  - {name: Stream, string: stream}
  - {name: Export, string: export}
  - {name: Local, string: local}

  # Protobuf magic identifiers (i.e., predeclared names).
  - {name: Int32, string: int32}
  - {name: Int64, string: int64}
  - {name: Uint32, string: uint32}
  - {name: Uint64, string: uint64}
  - {name: Sint32, string: sint32}
  - {name: Sint64, string: sint64}
  - {name: Fixed32, string: fixed32}
  - {name: Fixed64, string: fixed64}
  - {name: Sfixed32, string: sfixed32}
  - {name: Sfixed64, string: sfixed64}
  - {name: Float, string: float}
  - {name: Double, string: double}
  - {name: Bool, string: bool}
  - {name: String, string: string}
  - {name: Bytes, string: bytes}

  - {name: Inf, string: inf}
  - {name: NaN, string: nan, doc: "nan"}
  - {name: 'True', string: 'true'}
  - {name: 'False', string: 'false'}
  - {name: 'Null', string: 'null'}
  - {name: Map, string: map}
  - {name: Max, string: max}

  # Expression keywords.
  - {name: Return, string: return}
  - {name: Break, string: break}
  - {name: Continue, string: continue}
  - {name: Yield, string: yield}

  - {name: Defer, string: defer}
  - {name: Try, string: try}
  - {name: Catch, string: catch}

  - {name: If, string: if}
  - {name: Unless, string: unless}
  - {name: Else, string: else}

  - {name: Loop, string: loop}
  - {name: While, string: while}
  - {name: Do, string: do}
  - {name: For, string: for}
  - {name: In, string: in}

  - {name: Switch, string: switch}
  - {name: Match, string: match}
  - {name: Case, string: case}

  - {name: As, string: as}
  - {name: Func, string: func}
  - {name: Const, string: const}
  - {name: Let, string: let}
  - {name: Var, string: var}
  - {name: Type, string: type}
  - {name: Extern, string: extern}

  - {name: And, string: and}
  - {name: Or, string: or}
  - {name: Not, string: not}
  
  # Protobuf pseudo-option names.
  - {name: Default, string: default}
  - {name: JsonName, string: json_name}

  ## Reserved words ##
  
  # Generic particles.
  - {name: Semi, string: ";"}
  - {name: Comma, string: ","}
  - {name: Dot, string: "."}
  - {name: Colon, string: ":"}
  
  - {name: Newline, string: "\n", docs: "\\n"}

  - {name: At, string: "@"}
  - {name: Hash, string: "#"}
  - {name: Dollar, string: "$"}
  - {name: Twiddle, string: "~"}

  # Arithmetic operators.
  - {name: Add, string: "+"}
  - {name: Sub, string: "-"}
  - {name: Mul, string: "*"}
  - {name: Div, string: "/"}
  - {name: Rem, string: "%"}
  - {name: Amp, string: "&"}
  - {name: Pipe, string: "|"}
  - {name: Xor, string: "^"}
  - {name: Shl, string: "<<"}
  - {name: Shr, string: ">>"}

  - {name: Bang, string: "!"}
  - {name: Bangs, string: "!!"} 
  - {name: Ask, string: "?"}
  - {name: Asks, string: "??"}

  # C-style and/or.
  - {name: "Amps", string: "&&"}
  - {name: "Pipes", string: "||"}

  # Assignment operators.
  - {name: Assign, string: "="}
  - {name: AssignNew, string: ":="}
  - {name: AssignAdd, string: "+="}
  - {name: AssignSub, string: "-="}
  - {name: AssignMul, string: "*="}
  - {name: AssignDiv, string: "/="}
  - {name: AssignRem, string: "%="}
  - {name: AssignAmp, string: "&="}
  - {name: AssignPipe, string: "|="}
  - {name: AssignXor, string: "^="}
  - {name: AssignShl, string: "<<="}
  - {name: AssignShr, string: ">>="}

  # Rust-style range operators.
  - {name: Range, string: ".."}
  - {name: RangeEq, string: "..="}
  
  # Unfused brackets.
  - {name: LParen, string: "("}
  - {name: RParen, string: ")"}
  - {name: LBracket, string: "["}
  - {name: RBracket, string: "]"}
  - {name: LBrace, string: "{"}
  - {name: RBrace, string: "}"}

  # Comparison operators.
  - {name: "Lt", string: "<"}
  - {name: "Gt", string: ">"}
  - {name: "Le", string: "<="}
  - {name: "Ge", string: ">="}
  - {name: "Eq", string: "=="}
  - {name: "Ne", string: "!="}

  - {name: "Comment", string: "//"}
  - {name: "LComment", string: "/*"}
  - {name: "RComment", string: "*/"}

  # Fused brackets.
  # These three must be declared together, since this is used for layout
  # compression in token.nat.
  - {name: Parens, string: "(...)", docs: "(...) (fused)"}
  - {name: Brackets, string: "[...]", docs: "[...] (fused)"}
  - {name: Braces, string: "{...}", docs: "{...} (fused)"}
  - {name: Angles, string: "<...>", docs: "<...> (fused)"}
  - {name: BlockComment, string: "/* ... */", docs: "/* ... */ (fused)"}
